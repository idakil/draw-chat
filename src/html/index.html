<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="../js/chat.js"></script>
    <title>Title</title>
</head>
<script>
    // ask user for name
    let name = prompt("Enter your chat name:", "Guest");

    // default name is 'Guest'
    if (!name || name === ' ') {
        name = "Guest";
    }

    // strip tags
    name = name.replace(/(<([^>]+)>)/ig,"");

    //kick off chat
    var chat =  new Chat();

    $(function() {

        chat.getState();
/*
        // watch textarea for key presses
        $('#sendbox').keydown(function(event) {

            var key = event.which;

            //all keys including return.
            if (key >= 33) {

                var maxLength = $(this).attr("maxlength");
                var length = this.value.length;
            }
        });*/
        // watch textarea for release of key press
        $('#sendbox').keyup(function(e) {

            if (e.which === 13 ) {

                var text = $(this).val();
                var maxLength = $(this).attr("maxlength");
                var length = text.length;

                // send
                if (length <= maxLength + 1) {
                    chat.send(text, name);
                    $(this).val("");
                } else {
                    $(this).val(text.substring(0, maxLength));
                }
            }
        });
    });

</script>

<body onload="setInterval('chat.update()', 1000)">

<div id="game">

    <div id="draw"></div>
    <div id = "chat-wrap">
        <div id ="chat-area">
        </div>
        <div id="forms">
            <form id="send-message-area">
                <textarea name="message" id="sendbox" maxlength = '100'></textarea>
                <button id="send">Send</button>
            </form>
        </div>
    </div>

    <div id="options">
        <div id="buttonBox">
            <button id="red"></button>
            <button id="yellow"></button>
            <button id="green"></button>
            <button id="blue"></button>
            <button id="purple"></button>
            <button id="pink"></button>
            <button id="black"></button>
            <button id="eraser"></button>
            <button id="save" onclick="saveImage()">Save Image</button>
            <button id="load" onclick="loadImage()">Load Image</button>
        </div>
        <button id="clear" onclick="clearCanvas()">Clear board</button>
        <div id="slidecontainer">
            <input type="range" min="1" max="20" value="2" class="slider" id="strokeRange">
        </div>
    </div>
</div>
<script src="../js/drawingBoard.js"></script>
</body>
</html>