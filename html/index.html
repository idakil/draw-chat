<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="../js/chat.js"></script>
    <script src="../js/bb.js"></script>


    <title>Title</title>
</head>
<script>

    // ask user for name with popup prompt
    var name = prompt("Enter your chat name:", "Guest");

    // default name is 'Guest'
    if (!name || name === ' ') {
        name = "Guest";
    }

    // strip tags
    name = name.replace(/(<([^>]+)>)/ig,"");

    // display name on page
    $("#name-area").html("You are: <span>" + name + "</span>");

    // kick off chat
    var chat =  new Chat();

    $(function() {

        chat.getState();

        // watch textarea for key presses
        $('#sendbox').keydown(function(event) {

            var key = event.which;

            //all keys including return.
            if (key >= 33) {

                var maxLength = $(this).attr("maxlength");
                var length = this.value.length;

            }
        });
        // watch textarea for release of key press
        $('#sendbox').keyup(function(e) {

            if (e.which === 13) {

                var text = $(this).val();
                var maxLength = $(this).attr("maxlength");
                var length = text.length;

                // send
                if (length <= maxLength + 1) {
                    chat.send(text, name);
                    $(this).val("");
                } else {
                    $(this).val(text.substring(0, maxLength));
                }
            }
        });
    });
</script>
<body onload="setInterval('chat.update()', 100)">

<p id="name-area"></p>
<div id="game">


    <div id="draw" onmousedown = 'updateCanvas()'></div>
    <div id= "counter"></div>

    <div id = "chat-wrap">
        <div id ="chat-area">
        </div>
        <div id="forms">
            <form id="send-message-area">
                <textarea name="message" id="sendbox" maxlength = '100'></textarea>
            </form>
            <!--<form id="send-message-area1">
                <p>Your message: </p>
                <textarea id="sendbox1" maxlength = '100' ></textarea>
            </form>-->
        </div>
    </div>
</div>
<script src="../js/drawingBoard.js"></script>
</body>
</html>